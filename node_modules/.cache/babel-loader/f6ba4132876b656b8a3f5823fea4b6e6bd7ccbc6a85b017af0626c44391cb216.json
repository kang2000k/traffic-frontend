{"ast":null,"code":"import React,{useEffect,useState}from'react';import PullingDetails from'./PullingDetails';import Top_Bar from\"./Top-bar\";import EditPullingForm from'./EditPullingForm';import AddPullingForm from\"./AddPullingForm\";import SideMenu from\"./Side-menu\";import axios from\"axios\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PullingList=()=>{const[pullings,setPulling]=useState([]);const[selectedPullings,setSelectedPullings]=useState(null);const[isEditModalOpen,setEditModalOpen]=useState(false);const[isAddModalOpen,setAddModalOpen]=useState(false);const[isModalOpen,setIsModalOpen]=useState(false);const[message,setMessage]=useState('');const navigate=useNavigate();useEffect(()=>{// Fetch tasks from Flask backend using Axios\naxios.get('http://localhost:5000/boundary/viewPull').then(response=>{setPulling(response.data);console.log(response.data);}).catch(error=>{console.error('Error fetching pulling:',error);});},[]);const handleAddConfig=()=>{setAddModalOpen(true);};const handleCloseAddModal=()=>{setAddModalOpen(false);};const handleViewDetails=pulling=>{setMessage(null);setSelectedPullings(pulling);setIsModalOpen(true);};const handleCloseModal=()=>{setMessage(null);setIsModalOpen(false);setSelectedPullings(null);};const handleEditDetails=async pulling=>{setMessage(null);setSelectedPullings(pulling);setEditModalOpen(true);};const handleCloseEditModal=()=>{setMessage(null);setEditModalOpen(false);setSelectedPullings(null);};const handleDelete=async pulling=>{try{const response=await axios.delete('http://localhost:5000/boundary/deletePull',{id:pulling.id,name:pulling.name,description:pulling.description,table_name:pulling.table_name,columns:pulling.columns,table_type_id:pulling.table_type_id,frequency_min:pulling.frequency_min,data_source:pulling.data_source,headers:pulling.headers,last_pulled_at:pulling.last_pulled_at,created_date:pulling.created_date},{withCredentials:true});setMessage(response.data.message);console.log('API response message:',response.data.message);if(response.status===200){setPulling(prevPullings=>prevPullings.filter(pull=>pull.id!==pulling.id));alert('The configuration deleted successfully.');navigate('/pulling');}}catch(error){alert('The configuration deleted unsuccessfully.');console.error('Error response:',error.response);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"pulling-page\",children:[/*#__PURE__*/_jsx(Top_Bar,{title:\"Pulling Configuration\"}),\" \",/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(SideMenu,{})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pulling-list\",children:[pullings.length===0?/*#__PURE__*/_jsx(\"h1\",{children:\"No available configuration\"}):pullings.map(pulling=>/*#__PURE__*/_jsxs(\"div\",{className:\"pulling-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:pulling.name}),/*#__PURE__*/_jsx(\"p\",{children:pulling.description}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleViewDetails(pulling),children:\"View Details\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEditDetails(pulling),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(pulling),children:\"Delete\"})]},pulling.id)),isModalOpen&&/*#__PURE__*/_jsx(PullingDetails,{config:selectedPullings,onClose:handleCloseModal})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAddConfig(),children:\"Add+\"})]})]}),isEditModalOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"modal\",children:/*#__PURE__*/_jsx(EditPullingForm,{pulling:selectedPullings,onClose:handleCloseEditModal})}),isAddModalOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"addModal\",children:/*#__PURE__*/_jsx(AddPullingForm,{onClose:handleCloseAddModal})})]});};export default PullingList;","map":{"version":3,"names":["React","useEffect","useState","PullingDetails","Top_Bar","EditPullingForm","AddPullingForm","SideMenu","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","PullingList","pullings","setPulling","selectedPullings","setSelectedPullings","isEditModalOpen","setEditModalOpen","isAddModalOpen","setAddModalOpen","isModalOpen","setIsModalOpen","message","setMessage","navigate","get","then","response","data","console","log","catch","error","handleAddConfig","handleCloseAddModal","handleViewDetails","pulling","handleCloseModal","handleEditDetails","handleCloseEditModal","handleDelete","delete","id","name","description","table_name","columns","table_type_id","frequency_min","data_source","headers","last_pulled_at","created_date","withCredentials","status","prevPullings","filter","pull","alert","className","children","title","length","map","onClick","config","onClose"],"sources":["/Users/lee/PycharmProjects/TrafficForecasting/frontend/src/components/PullingConfiguration.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport PullingDetails from './PullingDetails';\nimport Top_Bar from \"./Top-bar\";\nimport EditPullingForm from './EditPullingForm';\nimport AddPullingForm from \"./AddPullingForm\";\nimport SideMenu from \"./Side-menu\";\nimport axios from \"axios\";\nimport {useNavigate} from \"react-router-dom\";\n\nconst PullingList = () => {\n  const [pullings, setPulling] = useState([]);\n  const [selectedPullings, setSelectedPullings] = useState(null);\n  const [isEditModalOpen, setEditModalOpen] = useState(false);\n  const [isAddModalOpen, setAddModalOpen] = useState(false);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [message, setMessage] = useState('');\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    // Fetch tasks from Flask backend using Axios\n    axios.get('http://localhost:5000/boundary/viewPull')\n      .then(response => {\n        setPulling(response.data);\n        console.log(response.data);\n      })\n      .catch(error => {\n        console.error('Error fetching pulling:', error);\n      });\n  }, []);\n\n  const handleAddConfig = () => {\n      setAddModalOpen(true);\n  }\n\n  const handleCloseAddModal = () => {\n    setAddModalOpen(false);\n  };\n\n  const handleViewDetails = (pulling) => {\n    setMessage(null);\n    setSelectedPullings(pulling);\n    setIsModalOpen(true);\n  };\n\n  const handleCloseModal = () => {\n    setMessage(null);\n    setIsModalOpen(false);\n    setSelectedPullings(null);\n  };\n\n  const handleEditDetails = async (pulling) => {\n      setMessage(null);\n      setSelectedPullings(pulling);\n      setEditModalOpen(true);\n  }\n\n  const handleCloseEditModal = () => {\n    setMessage(null);\n    setEditModalOpen(false);\n    setSelectedPullings(null)\n  };\n\n  const handleDelete = async (pulling) => {\n    try {\n      const response = await axios.delete('http://localhost:5000/boundary/deletePull', {\n        id: pulling.id,\n        name: pulling.name,\n        description: pulling.description,\n        table_name: pulling.table_name,\n        columns: pulling.columns,\n        table_type_id: pulling.table_type_id,\n        frequency_min: pulling.frequency_min,\n        data_source: pulling.data_source,\n        headers: pulling.headers,\n        last_pulled_at: pulling.last_pulled_at,\n        created_date: pulling.created_date\n      }, {withCredentials: true});\n      setMessage(response.data.message);\n      console.log('API response message:', response.data.message);\n      if (response.status === 200) {\n        setPulling((prevPullings) =>\n        prevPullings.filter(pull => pull.id !== pulling.id)\n      );\n        alert('The configuration deleted successfully.');\n        navigate('/pulling');\n      }\n  } catch (error) {\n      alert('The configuration deleted unsuccessfully.');\n      console.error('Error response:', error.response);\n  }\n};\n\n  return (\n      <div className=\"pulling-page\">\n        <Top_Bar title=\"Pulling Configuration\"/> {/* Use the top bar here */}\n        <tr>\n          <td>\n            <SideMenu/>\n          </td>\n          <td>\n            <div className=\"pulling-list\">\n              {pullings.length === 0 ? (\n                  <h1>No available configuration</h1>\n              ) : (\n                  pullings.map(pulling => (\n                      <div key={pulling.id} className=\"pulling-card\">\n                        <h3>{pulling.name}</h3>\n                        <p>{pulling.description}</p>\n                        <button onClick={() => handleViewDetails(pulling)}>\n                          View Details\n                        </button>\n                        <button onClick={() => handleEditDetails(pulling)}>\n                          Edit\n                        </button>\n                        <button onClick={() => handleDelete(pulling)}>\n                          Delete\n                        </button>\n                      </div>\n                  ))\n              )}\n              {isModalOpen && (\n                  <PullingDetails config={selectedPullings} onClose={handleCloseModal}/>\n              )}\n            </div>\n            <button onClick={() => handleAddConfig()}>\n              Add+\n            </button>\n          </td>\n        </tr>\n\n        {isEditModalOpen && (\n        <div className=\"modal\">\n          <EditPullingForm pulling={selectedPullings} onClose={handleCloseEditModal} />\n        </div>\n      )}\n        {isAddModalOpen && (\n        <div className=\"addModal\">\n          <AddPullingForm onClose={handleCloseAddModal} />\n        </div>\n      )}\n      </div>\n  );\n};\n\n\nexport default PullingList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}