{"ast":null,"code":"import React,{useEffect,useState}from'react';import TableDetails from'./TableDetails';import Top_Bar from\"./Top-bar\";import EditTableForm from'./EditTableForm';import AddTableForm from\"./AddTableForm\";import TrainModelForm from\"./TrainModelForm\";import SideMenu from\"./Side-menu\";import axios from\"axios\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TableList=()=>{const[tables,setTable]=useState([]);const[selectedTable,setSelectedTable]=useState(null);const[isEditModalOpen,setEditModalOpen]=useState(false);const[isTrainModalOpen,setTrainModalOpen]=useState(false);const[isAddModalOpen,setAddModalOpen]=useState(false);const[isModalOpen,setIsModalOpen]=useState(false);const[message,setMessage]=useState('');const navigate=useNavigate();useEffect(()=>{// Fetch tasks from Flask backend using Axios\naxios.get('http://localhost:5000/boundary/viewTable').then(response=>{setTable(response.data);console.log(response.data);}).catch(error=>{console.error('Error fetching pulling:',error);});},[]);const handleAddConfig=()=>{setAddModalOpen(true);};const handleCloseAddModal=()=>{setAddModalOpen(false);};const handleViewDetails=table=>{setMessage(null);setSelectedTable(table);setIsModalOpen(true);};const handleCloseModal=()=>{setMessage(null);setIsModalOpen(false);setSelectedTable(null);};const handleEditDetails=async table=>{setMessage(null);setSelectedTable(table);setEditModalOpen(true);};const handleCloseEditModal=()=>{setMessage(null);setEditModalOpen(false);setSelectedTable(null);};const handleOpenTrainModel=table=>{setMessage(null);setSelectedTable(table);setTrainModalOpen(true);};const handleCloseTrainModel=()=>{setMessage(null);setTrainModalOpen(false);setSelectedTable(null);};const handleDelete=async table=>{try{const response=await axios.delete('http://localhost:5000/boundary/deleteTableConfig',{id:table.id,name:table.name,description:table.description,table_name:table.table_name,columns_selected:table.columns_selected,model_type_id:table.model_type_id,hyper_parameters:table.hyper_parameters,created_date:table.created_date},{withCredentials:true});setMessage(response.data.message);console.log('API response message:',response.data.message);if(response.status===200){setTable(prevTables=>prevTables.filter(tab=>tab.id!==table.id));alert('The configuration deleted successfully.');navigate('/table');}}catch(error){alert('The configuration deleted unsuccessfully.');console.error('Error response:',error.response);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"table-page\",children:[/*#__PURE__*/_jsx(Top_Bar,{title:\"Table Configuration\"}),\" \",/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(SideMenu,{})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"table-list\",children:[tables.length===0?/*#__PURE__*/_jsx(\"h1\",{children:\"No available configuration\"}):tables.map(table=>/*#__PURE__*/_jsxs(\"div\",{className:\"table-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:table.name}),/*#__PURE__*/_jsx(\"p\",{children:table.description}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleViewDetails(table),children:\"View Details\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEditDetails(table),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleOpenTrainModel(table),children:\"Train Model |>\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(table),children:\"Delete\"})]},table.id)),isModalOpen&&/*#__PURE__*/_jsx(TableDetails,{config:selectedTable,onClose:handleCloseModal})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAddConfig(),children:\"Add+\"})]})]}),isEditModalOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"modal\",children:/*#__PURE__*/_jsx(EditTableForm,{table:selectedTable,onClose:handleCloseEditModal})}),isAddModalOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"addModal\",children:/*#__PURE__*/_jsx(AddTableForm,{onClose:handleCloseAddModal})}),isTrainModalOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"addModal\",children:/*#__PURE__*/_jsx(TrainModelForm,{table:selectedTable,onClose:handleCloseTrainModel})})]});};export default TableList;","map":{"version":3,"names":["React","useEffect","useState","TableDetails","Top_Bar","EditTableForm","AddTableForm","TrainModelForm","SideMenu","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","TableList","tables","setTable","selectedTable","setSelectedTable","isEditModalOpen","setEditModalOpen","isTrainModalOpen","setTrainModalOpen","isAddModalOpen","setAddModalOpen","isModalOpen","setIsModalOpen","message","setMessage","navigate","get","then","response","data","console","log","catch","error","handleAddConfig","handleCloseAddModal","handleViewDetails","table","handleCloseModal","handleEditDetails","handleCloseEditModal","handleOpenTrainModel","handleCloseTrainModel","handleDelete","delete","id","name","description","table_name","columns_selected","model_type_id","hyper_parameters","created_date","withCredentials","status","prevTables","filter","tab","alert","className","children","title","length","map","onClick","config","onClose"],"sources":["/Users/lee/PycharmProjects/TrafficForecasting/frontend/src/components/TableConfiguration.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport TableDetails from './TableDetails';\nimport Top_Bar from \"./Top-bar\";\nimport EditTableForm from './EditTableForm';\nimport AddTableForm from \"./AddTableForm\";\nimport TrainModelForm from \"./TrainModelForm\";\nimport SideMenu from \"./Side-menu\";\nimport axios from \"axios\";\nimport {useNavigate} from \"react-router-dom\";\n\nconst TableList = () => {\n  const [tables, setTable] = useState([]);\n  const [selectedTable, setSelectedTable] = useState(null);\n  const [isEditModalOpen, setEditModalOpen] = useState(false);\n  const [isTrainModalOpen, setTrainModalOpen] = useState(false);\n  const [isAddModalOpen, setAddModalOpen] = useState(false);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [message, setMessage] = useState('');\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    // Fetch tasks from Flask backend using Axios\n    axios.get('http://localhost:5000/boundary/viewTable')\n      .then(response => {\n        setTable(response.data);\n        console.log(response.data);\n      })\n      .catch(error => {\n        console.error('Error fetching pulling:', error);\n      });\n  }, []);\n\n  const handleAddConfig = () => {\n      setAddModalOpen(true);\n  }\n\n  const handleCloseAddModal = () => {\n    setAddModalOpen(false);\n  };\n\n  const handleViewDetails = (table) => {\n    setMessage(null);\n    setSelectedTable(table);\n    setIsModalOpen(true);\n  };\n\n  const handleCloseModal = () => {\n    setMessage(null);\n    setIsModalOpen(false);\n    setSelectedTable(null);\n  };\n\n  const handleEditDetails = async (table) => {\n      setMessage(null);\n      setSelectedTable(table);\n      setEditModalOpen(true);\n  }\n\n  const handleCloseEditModal = () => {\n    setMessage(null);\n    setEditModalOpen(false);\n    setSelectedTable(null)\n  };\n\n  const handleOpenTrainModel = (table) => {\n      setMessage(null);\n      setSelectedTable(table);\n      setTrainModalOpen(true);\n  }\n\n  const handleCloseTrainModel = () => {\n    setMessage(null);\n    setTrainModalOpen(false);\n    setSelectedTable(null)\n  }\n\n  const handleDelete = async (table) => {\n    try {\n      const response = await axios.delete('http://localhost:5000/boundary/deleteTableConfig', {\n        id: table.id,\n        name: table.name,\n        description: table.description,\n        table_name: table.table_name,\n        columns_selected: table.columns_selected,\n        model_type_id: table.model_type_id,\n        hyper_parameters: table.hyper_parameters,\n        created_date: table.created_date\n      }, {withCredentials: true});\n      setMessage(response.data.message);\n      console.log('API response message:', response.data.message);\n      if (response.status === 200) {\n        setTable((prevTables) =>\n        prevTables.filter(tab => tab.id !== table.id)\n      );\n        alert('The configuration deleted successfully.');\n        navigate('/table');\n      }\n  } catch (error) {\n      alert('The configuration deleted unsuccessfully.');\n      console.error('Error response:', error.response);\n  }\n};\n\n  return (\n      <div className=\"table-page\">\n        <Top_Bar title=\"Table Configuration\"/> {/* Use the top bar here */}\n        <tr>\n          <td>\n            <SideMenu/>\n          </td>\n          <td>\n            <div className=\"table-list\">\n              {tables.length === 0 ? (\n                  <h1>No available configuration</h1>\n              ) : (\n                  tables.map(table => (\n                      <div key={table.id} className=\"table-card\">\n                        <h3>{table.name}</h3>\n                        <p>{table.description}</p>\n                        <button onClick={() => handleViewDetails(table)}>\n                          View Details\n                        </button>\n                        <button onClick={() => handleEditDetails(table)}>\n                          Edit\n                        </button>\n                        <button onClick={() => handleOpenTrainModel(table)}>\n                          Train Model |>\n                        </button>\n                        <button onClick={() => handleDelete(table)}>\n                          Delete\n                        </button>\n                      </div>\n                  ))\n              )}\n              {isModalOpen && (\n                  <TableDetails config={selectedTable} onClose={handleCloseModal}/>\n              )}\n            </div>\n            <button onClick={() => handleAddConfig()}>\n              Add+\n            </button>\n          </td>\n        </tr>\n\n        {isEditModalOpen && (\n        <div className=\"modal\">\n          <EditTableForm table={selectedTable} onClose={handleCloseEditModal} />\n        </div>\n      )}\n        {isAddModalOpen && (\n        <div className=\"addModal\">\n          <AddTableForm onClose={handleCloseAddModal} />\n        </div>\n      )}\n        {isTrainModalOpen && (\n        <div className=\"addModal\">\n          <TrainModelForm table={selectedTable} onClose={handleCloseTrainModel} />\n        </div>\n      )}\n      </div>\n  );\n};\n\n\nexport default TableList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}